{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shoobham\\\\Desktop\\\\New folder\\\\MERNHotelBooking\\\\client\\\\src\\\\screens\\\\MyBookingScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { Tag } from \"antd\";\nimport Loader from \"../components/Loader\";\nimport Error from \"../components/Error\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MyBookingScreen() {\n  _s();\n\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const user = JSON.parse(localStorage.getItem(\"currentUser\"));\n\n  async function fetchMyAPI() {\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const data = (await axios.post(\"/api/bookings/getbookingbyuserid\", {\n        userid: user._id\n      })).data;\n      setBookings(data);\n    } catch (error) {\n      console.log(error);\n      setError(error);\n    }\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    fetchMyAPI();\n  }, []);\n\n  async function cancelBooking(bookingid, roomid) {\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const data = (await axios.post(\"/api/bookings/cancelbooking\", {\n        bookingid,\n        roomid\n      })).data;\n      setLoading(false);\n      Swal.fire(\"Congratulations\", \"Your Room Cancelled Successfully\", \"success\").then(result => {\n        fetchMyAPI();\n      });\n    } catch (error) {\n      console.log(error); //setError(error);\n\n      Swal.fire(\"Opps\", \"Error:\" + error, \"error\");\n    }\n\n    setLoading(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : error.length > 0 ? /*#__PURE__*/_jsxDEV(Error, {\n      msg: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6  ml-5\",\n        children: bookings && bookings.map(booking => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bs\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: booking.room\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"BookingId:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 23\n              }, this), \" \", booking._id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"CheckIn:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 23\n              }, this), \" \", booking.fromdate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"CheckOut:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 23\n              }, this), \" \", booking.todate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Amount:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 23\n              }, this), \" \", booking.totalamount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 23\n              }, this), \" \", booking.status === \"booked\" ? /*#__PURE__*/_jsxDEV(Tag, {\n                color: \"green\",\n                children: \"CONFIRMED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(Tag, {\n                color: \"red\",\n                children: \"CANCELLED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 21\n            }, this), booking.status === \"booked\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: () => {\n                  cancelBooking(booking._id, booking.roomid);\n                },\n                children: \"Cancel Booking\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyBookingScreen, \"GZ5AaMiWFca7kLmIJnpnlrIrkqM=\");\n\n_c = MyBookingScreen;\nexport default MyBookingScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyBookingScreen\");","map":{"version":3,"sources":["C:/Users/Shoobham/Desktop/New folder/MERNHotelBooking/client/src/screens/MyBookingScreen.js"],"names":["React","useState","useEffect","axios","Swal","Tag","Loader","Error","MyBookingScreen","bookings","setBookings","loading","setLoading","error","setError","user","JSON","parse","localStorage","getItem","fetchMyAPI","data","post","userid","_id","console","log","cancelBooking","bookingid","roomid","fire","then","result","length","map","booking","room","fromdate","todate","totalamount","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Tag } from \"antd\";\r\n\r\nimport Loader from \"../components/Loader\";\r\nimport Error from \"../components/Error\";\r\n\r\nfunction MyBookingScreen() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n\r\n  async function fetchMyAPI() {\r\n    setError(\"\");\r\n    setLoading(true);\r\n    try {\r\n      const data = (\r\n        await axios.post(\"/api/bookings/getbookingbyuserid\", {\r\n          userid: user._id,\r\n        })\r\n      ).data;\r\n      setBookings(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setError(error);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchMyAPI();\r\n  }, []);\r\n\r\n  async function cancelBooking(bookingid, roomid) {\r\n    setError(\"\");\r\n    setLoading(true);\r\n    try {\r\n      const data = (\r\n        await axios.post(\"/api/bookings/cancelbooking\", {\r\n          bookingid,\r\n          roomid,\r\n        })\r\n      ).data;\r\n      setLoading(false);\r\n      Swal.fire(\r\n        \"Congratulations\",\r\n        \"Your Room Cancelled Successfully\",\r\n        \"success\"\r\n      ).then((result) => {\r\n        fetchMyAPI();\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      //setError(error);\r\n      Swal.fire(\"Opps\", \"Error:\" + error, \"error\");\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {loading ? (\r\n        <Loader></Loader>\r\n      ) : error.length > 0 ? (\r\n        <Error msg={error}></Error>\r\n      ) : (\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6  ml-5\">\r\n            {bookings &&\r\n              bookings.map((booking) => {\r\n                return (\r\n                  <div className=\"bs\">\r\n                    <h1>{booking.room}</h1>\r\n                    <p>\r\n                      <b>BookingId:</b> {booking._id}\r\n                    </p>\r\n                    <p>\r\n                      <b>CheckIn:</b> {booking.fromdate}\r\n                    </p>\r\n                    <p>\r\n                      <b>CheckOut:</b> {booking.todate}\r\n                    </p>\r\n                    <p>\r\n                      <b>Amount:</b> {booking.totalamount}\r\n                    </p>\r\n                    <p>\r\n                      <b>Status:</b>{\" \"}\r\n                      {booking.status === \"booked\" ? (\r\n                        <Tag color=\"green\">CONFIRMED</Tag>\r\n                      ) : (\r\n                        <Tag color=\"red\">CANCELLED</Tag>\r\n                      )}\r\n                    </p>\r\n                    {booking.status === \"booked\" && (\r\n                      <div className=\"text-right\">\r\n                        <button\r\n                          className=\"btn btn-danger\"\r\n                          onClick={() => {\r\n                            cancelBooking(booking._id, booking.roomid);\r\n                          }}\r\n                        >\r\n                          Cancel Booking\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyBookingScreen;\r\n"]},"metadata":{},"sourceType":"module"}